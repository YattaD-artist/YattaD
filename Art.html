<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>YattaD - Gallery</title>
<link href="https://fonts.googleapis.com/css2?family=Saira:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<style>
* { box-sizing: border-box; }
html, body { max-width: 100%; overflow-x: hidden; }
body {
    margin: 0; font-family: 'Saira', sans-serif;
    background-color: var(--bg); color: var(--text);
    --bg: #ede9eb; --text: #1a2129; --accent: #e32630;
    transition: background-color 0.3s, color 0.3s;
}
body.dark { --bg: #1b1b1b; --text: #f5f5f5; --accent: #1cd9cf; }

header {
    display: flex; align-items: center; justify-content: space-between;
    padding: 12px 24px; border-bottom: 1px solid #ccc; background-color: var(--bg);
    position: sticky; top: 0; z-index: 100;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.center-title { flex: 1; text-align: center; font-weight: 800; font-size: 2.5rem; color: var(--accent); }
.left, .right { display: flex; align-items: center; gap: 16px; }
.icon-btn {
    background: none; border: none; cursor: pointer; font-size: 1.3rem;
    color: var(--text); display: flex; align-items: center; justify-content: center;
    width: 38px; height: 38px; border-radius: 50%; text-decoration: none;
    transition: transform 0.25s ease, color 0.25s ease, background-color 0.25s ease;
}
.icon-btn:hover { transform: scale(1.15); color: var(--accent); background-color: rgba(0,0,0,0.05); }

main { display: flex; flex-direction: column; gap: 24px; padding: 30px; }

/* Intro */
.info {
    width: 100%; padding: 32px; background-color: var(--bg);
    border-radius: 12px; border: 1px solid rgba(0,0,0,0.1);
    box-shadow: 0 4px 12px rgba(0,0,0,0.05); 
}
.info h2 { font-size: 2rem; margin-bottom: 16px; font-weight: 700; color: var(--accent);
          border-bottom: 3px solid var(--accent); display: inline-block; padding-bottom: 5px; }
.info p { margin-bottom: 12px; line-height: 1.6; }

/* Menu grid */
.menu {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 18px;
    margin: 15px 20px;
}
.menu button {
    padding: 10px 16px; 
    border: 2px solid var(--text); 
    border-radius: 8px;
    background: none; 
    cursor: pointer; 
    font-weight: bold;
    font-size: 1.1rem;
    color: var(--text);
    transition: all 0.2s ease;
}
.menu button:hover {
    background: var(--accent); 
    color: var(--bg); 
    border-color: var(--accent);
}

/* Gallery */
#gallery {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 10px; padding: 10px;
}
.thumb {
    width: 100%; aspect-ratio: 1/1; object-fit: cover;
    cursor: pointer; border-radius: 6px;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.thumb:hover {
    transform: scale(1.03);
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
}

/* Overlay */
#overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.95);
    z-index: 999;
    justify-content: center;
    align-items: center;
    padding: 20px;
}
.overlay-content {
    display: flex;
    gap: 20px;
    max-width: 90%;
    max-height: 90%;
}
#fullImage {
    max-width: 70%;
    max-height: 100%;
    border-radius: 6px;
    object-fit: contain;
}
#imageInfo {
    color: white;
    max-width: 30%;
    overflow-y: auto;
}
#imageInfo h2 {
    margin-top: 0;
    margin-bottom: 10px;
    font-size: 1.5rem;
    color: var(--accent);
}
#imageInfo p {
    line-height: 1.4;
    font-size: 1rem;
}
#overlay button {
    position: absolute; top: 20px; right: 20px;
    font-size: 1.5rem; background: none; border: none; color: white;
    cursor: pointer;
}
</style>
</head>
<body>

<header>
    <div class="left">
        <a href="index.html" class="icon-btn" title="Trang chủ"><i class="fas fa-home"></i></a>
    </div>
    <div class="center-title" id="title">YattaD</div>
    <div class="right">
        <button class="icon-btn" id="theme-toggle" title="Đổi chế độ"><i class="fas fa-adjust"></i></button>
        <button class="icon-btn" id="lang-toggle" title="Đổi ngôn ngữ"><i class="fa-solid fa-language"></i></button>
    </div>
</header>

<div class="info">
    <h2 id="introTitle">Lời Nói Đầu</h2>
    <p id="introP1">Chào mừng bạn đến với bộ sưu tập nghệ thuật của tôi! Tại đây bạn có thể khám phá các tác phẩm minh họa, thiết kế nhân vật, commissions và fanart.</p>
    <p id="introP2">Mỗi tác phẩm đều được tôi thực hiện cẩn thận, hy vọng bạn sẽ tìm thấy những khoảnh khắc thú vị và cảm xúc khi thưởng thức.</p>
</div>

<div class="menu">
    <button id="menu1" onclick="loadCategory('MinhHoa')">Minh họa</button>
    <button id="menu2" onclick="loadCategory('Concepts')">Thiết kế nhân vật</button>
    <button id="menu3" onclick="loadCategory('Comm')">Commissions</button>
    <button id="menu4" onclick="loadCategory('Fan')">Fanart</button>
</div>

<div id="gallery"></div>

<div id="overlay">
    <button id="closeBtn">✖</button>
    <div class="overlay-content">
        <img id="fullImage" src="" alt="">
        <div id="imageInfo">
            <h2 id="artTitle"></h2>
            <p id="artDesc"></p>
        </div>
    </div>
</div>

<script>
// Theme toggle
const themeBtn = document.getElementById('theme-toggle');
themeBtn.addEventListener('click', () => {
    document.body.classList.toggle('dark');
    localStorage.setItem('theme', document.body.classList.contains('dark') ? 'dark' : 'light');
});
if(localStorage.getItem('theme') === 'dark') document.body.classList.add('dark');

// Language toggle
const langBtn = document.getElementById('lang-toggle');
let currentLang = localStorage.getItem('lang') || 'vi';
const translations = {
    vi: {
        title: "YattaD",
        introTitle: "Lời Nói Đầu",
        introP1: "Chào mừng bạn đến với bộ sưu tập nghệ thuật của tôi! Tại đây bạn có thể khám phá các tác phẩm minh họa, thiết kế nhân vật, commissions và fanart.",
        introP2: "Mỗi tác phẩm đều được tôi thực hiện cẩn thận, hy vọng bạn sẽ tìm thấy những khoảnh khắc thú vị và cảm xúc khi thưởng thức.",
        menu1: "Minh họa", menu2: "Thiết kế nhân vật", menu3: "Commissions", menu4: "Fanart",
        noTitle: "Không có tiêu đề",
        noDesc: "Chưa có mô tả cho tác phẩm này."
    },
    en: {
        title: "YattaD",
        introTitle: "Introduction",
        introP1: "Welcome to my art collection! Here you can explore illustrations, character designs, commissions, and fanart.",
        introP2: "Each work is carefully crafted, I hope you will find interesting moments and emotions while enjoying.",
        menu1: "Illustration", menu2: "Character Design", menu3: "Commissions", menu4: "Fanart",
        noTitle: "No title",
        noDesc: "No description available for this artwork."
    }
};

function switchLanguage() {
    currentLang = currentLang === 'vi' ? 'en' : 'vi';
    localStorage.setItem('lang', currentLang);
    for(const key in translations[currentLang]) {
        const el = document.getElementById(key);
        if(el) el.innerHTML = translations[currentLang][key];
    }
}
langBtn.addEventListener('click', switchLanguage);
document.addEventListener('DOMContentLoaded', () => { if(currentLang === 'en') switchLanguage(); });

// Gallery data
const gallery = document.getElementById('gallery');
const overlay = document.getElementById('overlay');
const fullImage = document.getElementById('fullImage');
const artTitle = document.getElementById('artTitle');
const artDesc = document.getElementById('artDesc');
const closeBtn = document.getElementById('closeBtn');

const categoryImages = {
    "MinhHoa": 5,
    "Concepts": 5,
    "Comm": 5,
    "Fan": 5
};

const imageDetails = {
  "arts/MinhHoa/01": { 
    vi: { title: "Red", desc: "Thợ rèn gấu trúc đỏ" },
    en: { title: "Red", desc: "Red panda blacksmith" }
  },
  "arts/MinhHoa/02": { 
    vi: { title: "Ruby", desc: "Cháu gái của Red, Kiếm sĩ gấu trúc đỏ" },
    en: { title: "Ruby", desc: "Red's niece, red panda swordswoman" }
  }
  // thêm ảnh khác ở đây
};

function loadCategory(cat) {
    gallery.innerHTML = "";
    const total = categoryImages[cat] || 0;

    for (let i = 1; i <= total; i++) {
        const baseName = String(i).padStart(2, '0');
        const thumbPath = `arts/${cat}/${baseName}.min.webp`;
        const fullPath = `arts/${cat}/${baseName}.webp`;

        const img = document.createElement('img');
        img.dataset.src = thumbPath; // Lazy load thumbnail
        img.className = "thumb";
        img.onclick = () => openFull(fullPath);
        gallery.appendChild(img);

        // Preload full image khi thumbnail xuất hiện
        const observer = new IntersectionObserver((entries, obs) => {
            entries.forEach(entry => {
                if(entry.isIntersecting) {
                    img.src = img.dataset.src; // Load thumbnail
                    const preload = new Image();
                    preload.src = fullPath; // Preload ảnh gốc
                    obs.unobserve(img);
                }
            });
        }, { threshold: 0.1 });

        observer.observe(img);
    }
}

function openFull(path) {
    const key = path.replace(/\.(webp|jpg|png)$/, ''); // bỏ phần đuôi file
    const detail = imageDetails[key] ? imageDetails[key][currentLang] : null;

    fullImage.src = path;
    artTitle.textContent = detail?.title || translations[currentLang].noTitle;
    artDesc.textContent = detail?.desc || translations[currentLang].noDesc;
    overlay.style.display = "flex";
}



closeBtn.onclick = () => overlay.style.display = "none";

// Load mặc định
loadCategory('MinhHoa');
</script>

</body>
</html>
