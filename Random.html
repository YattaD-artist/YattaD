<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Tiêu Chuẩn</title>
<link href="https://fonts.googleapis.com/css2?family=Saira:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<style>
* { box-sizing: border-box; }
html, body { max-width: 100%; overflow-x: hidden; margin:0; padding:0; }
body {
    font-family: 'Saira', sans-serif;
    background-color: var(--bg); color: var(--text);
    --bg: #ede9eb; --text: #1a2129; --accent: #e32630;
    transition: background-color 0.3s, color 0.3s;
}
body.dark { --bg: #1b1b1b; --text: #f5f5f5; --accent: #1cd9cf; }

header {
    display:flex; justify-content:space-between; align-items:center; 
    padding:12px 24px; border-bottom:1px solid #ccc; background-color:var(--bg);
    position:sticky; top:0; z-index:100; box-shadow:0 2px 8px rgba(0,0,0,0.1);
}
.center-title { flex:1; text-align:center; font-weight:800; font-size:2.5rem; color:var(--accent); }
.left,.right { display:flex; align-items:center; gap:16px; }
.icon-btn { background:none; border:none; cursor:pointer; font-size:1.3rem; color:var(--text);
    width:38px; height:38px; border-radius:50%; display:flex; align-items:center; justify-content:center;
    transition: transform 0.25s, color 0.25s, background-color 0.25s;
}
.icon-btn:hover { transform: scale(1.15); color:var(--accent); background-color: rgba(0,0,0,0.05); }

main {
    display:flex; flex-direction:column; gap:24px; padding:20px 30px;
}

#centerContainer {
    display:flex; gap:20px; width:100%;
}

/* Bên trái gồm 2 phần (trên/dưới) */
.left-column { flex:1; display:flex; flex-direction:column; gap:12px; }

.info {
    padding:16px; background-color:var(--bg); border-radius:12px;
    border:1px solid rgba(0,0,0,0.1); box-shadow:0 4px 12px rgba(0,0,0,0.05);
}
.info h2 { font-size:1.6rem; margin-bottom:12px; color:var(--accent); }
.info p { font-size:0.9rem; margin-bottom:8px; }

.left-panel {
    padding:16px; background-color:var(--bg); border-radius:12px;
    border:1px solid rgba(0,0,0,0.1); box-shadow:0 4px 12px rgba(0,0,0,0.05);
    display:flex; flex-direction:column; gap:12px;
}
.left-panel textarea {
    width:100%; height:120px; padding:8px; border-radius:8px; border:1px solid #ccc;
}

.options { display:flex; flex-direction:column; gap:10px; }

.right-panel {
    flex:1; display:flex; justify-content:center; align-items:flex-start;
}

#wheelContainer {
    position: relative; width:470px; height:470px;
    border-radius:50%; border:6px solid #ff7361; box-shadow:0 8px 20px rgba(0,0,0,0.3);
    display:flex; justify-content:center; align-items:center; background:#fff;
}
#centerImg {
    position:absolute; top:50%; left:50%; transform:translate(-50%, -50%);
    height:70px; width:auto; border-radius:50%; box-shadow:0 4px 10px rgba(0,0,0,0.3);
}

#resultOverlay {
    position:fixed; top:0; left:0; width:100%; height:100%;
    background:rgba(0,0,0,0.5); display:none; align-items:center; justify-content:center; z-index:999;
}
#resultPopup {
    background:white; color:black; padding:20px 24px; border-radius:12px;
    box-shadow:0 4px 16px rgba(0,0,0,0.4); min-width:200px; text-align:center;
    animation:popscale 0.3s ease;
}
#resultPopup h3 { margin:0 0 12px 0; color:var(--accent); font-size:1.4rem; }
#resultPopup button {
    margin-top:12px; padding:8px 14px; border:none; background:var(--accent); color:white;
    border-radius:8px; cursor:pointer;
}
@keyframes popscale { from { transform:scale(0.7); opacity:0; } to { transform:scale(1); opacity:1; } }

.menu { display:grid; grid-template-columns:repeat(auto-fit,minmax(150px,1fr)); gap:18px; margin-top:20px; }
.menuItem { cursor:pointer; text-align:center; border:2px solid var(--text); border-radius:12px; padding:8px; transition: transform 0.25s, box-shadow 0.25s; }
.menuItem img { width:100%; border-radius:8px; margin-bottom:6px; }
.menuItem:hover { transform:translateY(-3px); box-shadow:0 6px 12px rgba(0,0,0,0.15); border-color:var(--accent); }

@media(max-width:768px){ 
    #centerContainer { flex-direction:column; }
    .right-panel { justify-content:center; margin-top:16px; }
    .menu{grid-template-columns:repeat(auto-fit,minmax(100px,1fr)); gap:10px;} 
}
</style>
</head>
<body>
<header>
    <div class="left"><a href="index.html" class="icon-btn" title="Trang chủ"><i class="fas fa-home"></i></a></div>
    <div class="center-title" id="title">TIÊU CHUẨN</div>
    <div class="right">
        <button class="icon-btn" id="theme-toggle" title="Đổi chế độ"><i class="fas fa-adjust"></i></button>
        <button class="icon-btn" id="lang-toggle" title="Đổi ngôn ngữ"><i class="fa-solid fa-language"></i></button>
    </div>
</header>

<main>
<div id="centerContainer">

    <!-- Bên trái: 2 phần -->
    <div class="left-column">

        <!-- Trên bên trái: Giới thiệu -->
        <div class="info">
            <h2 id="introTitle">Giới Thiệu</h2>
            <p id="introP1">Đây là trang Tiêu Chuẩn – nơi cung cấp thông tin cơ bản và rõ ràng.</p>
            <p id="introP2">Hãy điền tên vào bảng để Tiêu chọn, hoặc thử những tiên đoán khác của Tiêu.</p>
        </div>

        <!-- Dưới bên trái: Nhập tên + tùy chọn + nút quay -->
        <div class="left-panel">
            <h3>Danh sách tên</h3>
            <textarea id="nameInput">Tiêu
Chọn
Thì
Chỉ
Có
Chuẩn</textarea>

            <div class="options">
              <label>
                <span id="repeat">Số lần lặp:</span>
                <input type="number" id="repeatInput" value="1" min="1" max="5" style="width:60px">
              </label>

              <label>
                <span id="spin">Thời gian quay:</span>
                <select id="durationSelect">
                  <option value="3000">3s</option>
                  <option value="4000">4s</option>
                  <option value="5000">5s</option>
                  <option value="6000">6s</option>
                  <option value="7000">7s</option>
                  <option value="8000">8s</option>
                  <option value="9000">9s</option>
                  <option value="10000">10s</option>
                  <option value="11000">11s</option>
                  <option value="12000">12s</option>
                </select>
              </label>
            </div>

            <button id="spinBtn">Quay</button>
        </div>

    </div>

    <!-- Bên phải: Vòng quay -->
    <div class="right-panel">
        <div id="wheelContainer">
            <canvas id="wheelCanvas" width="400" height="400"></canvas>
            <img id="centerImg" src="assets/Tieuchuan/Tieu.webp" alt="Tiêu">
        </div>
    </div>

</div>

<!-- Popup kết quả -->
<div id="resultOverlay">
  <div id="resultPopup">
    <h3>Kết quả</h3>
    <div id="resultText"></div>
    <button onclick="closePopup()">Đóng</button>
  </div>
</div>

<div class="menu">
    <div id="menu1" class="menuItem"><img src="images/mega.png"><p>Vietlott Mega</p></div>
    <div id="menu2" class="menuItem"><img src="images/power.png"><p>Vietlott Power</p></div>
    <div id="menu3" class="menuItem"><img src="images/abcd.png"><p>ABCD</p></div>
</div>
</main>

<script>
// ===== Theme toggle =====
const themeBtn=document.getElementById('theme-toggle');
themeBtn.addEventListener('click',()=>{
    document.body.classList.toggle('dark'); 
    localStorage.setItem('theme',document.body.classList.contains('dark')?'dark':'light');
});
if(localStorage.getItem('theme')==='dark') document.body.classList.add('dark');

// ===== Language toggle =====
const langBtn=document.getElementById('lang-toggle'); 
let currentLang=localStorage.getItem('lang')||'vi';
const translations={
    vi:{ title:"Tiêu Chuẩn", introTitle:"Giới Thiệu",
        introP1:"Đây là trang Tiêu Chuẩn – nơi cung cấp thông tin cơ bản và rõ ràng.",
        introP2:"Hãy điền tên vào bảng để Tiêu chọn, hoặc thử những tiên đoán khác của Tiêu.",
        repeat:"Số lần lặp", resultText:"Kết quả", spin:"Thời gian quay", spinBtn:"Quay",
        menu1:"Vietlott Mega", menu2:"Vietlott Power", menu3:"ABCD"},
    en:{ title:"Standard", introTitle:"Introduction", 
        introP1:"This is the Standard page – providing simple and clear information.",
        introP2:"Please enter a name in the table for Tiêu to choose, or try Tiêu's other predictions.",
        repeat:"Iterations", resultText:"Result", spin:"Spin time", spinBtn:"Spin",
        menu1:"Vietlott Mega", menu2:"Vietlott Power", menu3:"ABCD"}
};
function switchLanguage(){
    currentLang=currentLang==='vi'?'en':'vi'; 
    localStorage.setItem('lang',currentLang);
    for(const key in translations[currentLang]){
        const el=document.getElementById(key);
        if(el){
            if(key.startsWith('menu')){
                const p=el.querySelector('p');
                if(p) p.textContent=translations[currentLang][key];
            } else el.innerHTML=translations[currentLang][key];
        }
    }
}
langBtn.addEventListener('click',switchLanguage); 
document.addEventListener('DOMContentLoaded',()=>{if(currentLang==='en') switchLanguage();});

// ===== Vòng quay =====
const canvas = document.getElementById("wheelCanvas");
const ctx = canvas.getContext("2d");
const nameInput = document.getElementById("nameInput");
const repeatInput = document.getElementById("repeatInput");
const durationSelect = document.getElementById("durationSelect");
const spinBtn = document.getElementById("spinBtn");

const overlay = document.getElementById("resultOverlay");
const resultText = document.getElementById("resultText");

let names = [], angle = 0, spinning = false;

const colors = [
  "#ffc7cf", "#da526e", "#cb4c43", "#fce5d7", "#ff7361",
  "#ce7869", "#e55033", "#f8898e", "#eb4747", "#fd613a", "#dd7e57"
];

function updateNames(){
  const raw = nameInput.value.split("\n").map(x=>x.trim()).filter(x=>x);
  const repeat = Math.min(+repeatInput.value||1, 5);
  names = [];
  raw.forEach(n => { for(let i=0;i<repeat;i++) names.push(n); });
  drawWheel();
}

function drawWheel(){
  const radius = canvas.width/2;
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // tạo gradient trung tâm
  const grad = ctx.createRadialGradient(radius,radius,10,radius,radius,radius);
  grad.addColorStop(0, "#ffffff");
  grad.addColorStop(1, "#e0e0e0");
  ctx.fillStyle = grad;
  ctx.beginPath();
  ctx.arc(radius,radius,radius,0,2*Math.PI);
  ctx.fill();

  if(names.length===0){ 
    ctx.fillStyle="gray";
    ctx.beginPath();
    ctx.arc(radius,radius,radius,0,2*Math.PI);
    ctx.fill();
    return;
  }

  const arc = 2*Math.PI/names.length;
  names.forEach((n,i)=>{
    const start = angle + i*arc;
    ctx.beginPath();
    ctx.moveTo(radius,radius);
    ctx.fillStyle = colors[i % colors.length];
    ctx.arc(radius,radius,radius,start,start+arc);
    ctx.fill();

    // vẽ chữ
    ctx.save();
    ctx.translate(radius,radius);
    ctx.rotate(start+arc/2);
    ctx.fillStyle="black";
    ctx.font="16px Saira";
    ctx.textAlign="right";
    ctx.fillText(n, radius-10, 5);
    ctx.restore();
  });
}

function spinWheel(){
  if(spinning||names.length===0) return;
  spinning=true;
  const duration = +durationSelect.value;
  const targetAngle = angle+Math.random()*2*Math.PI+10*Math.PI;
  const start = performance.now();
  function animate(now){
    const elapsed = now-start;
    const progress = Math.min(elapsed/duration,1);
    angle = targetAngle*progress;
    drawWheel();
    if(progress<1) requestAnimationFrame(animate);
    else { spinning=false; showResult(); }
  }
  requestAnimationFrame(animate);
}

function showResult(){
  const arc=2*Math.PI/names.length;
  const normalized=(2*Math.PI - (angle % (2*Math.PI))) % (2*Math.PI);
  const index=Math.floor(normalized/arc);
  const winner=names[index];
  resultText.textContent=winner||"Không có tên";
  overlay.style.display="flex";
}

function closePopup() { overlay.style.display = "none"; }

updateNames();
overlay.addEventListener('click', (e)=>{ if(e.target===overlay) closePopup(); });
nameInput.addEventListener("input",updateNames);
repeatInput.addEventListener("input",updateNames);
durationSelect.addEventListener("change",updateNames);
spinBtn.addEventListener("click",spinWheel);
</script>
</body>
</html>
